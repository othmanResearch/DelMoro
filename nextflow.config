// nextflow.config file

params { 
	cpus		= 2
	outdir		= "outdir" 
		
	reference	= null	// Reference file path

	rawreads	= null 	// Raw reads paths
	tobetrimmed 	= null	// Raw reads paths + trimmomatic parameters
	tobealigned 	= null 	// Trimmed read paths 
	bam		= null  // Bam files paths used for base recalibration 
	tovarcall	= null  // Bam files paths used for variant calling

	knownSite1	= null 	// knownsites file n°1 should be .vcf
	knownSite2  	= null  // knownsites file n°1 should be .vcf
		
	// Indexes  

	BamIndex	= "${params.outdir}/Indexes/BamFiles/*.bai"  // Bam Files Indexes  [ mandatory ]  

	ALIGNERIndex	= "${params.outdir}/Indexes/Reference/*.fa.{0123,amb,ann,bwt.2bit.64,pac,bwt,sa}"   //  Bwa-mem 1,2 Ref Indexes    
	DictGATK	= "${params.outdir}/Indexes/Reference/*.dict"					   //  GATK Dictionary Ref Index    					  
	SamtoolsIndex	= "${params.outdir}/Indexes/Reference/*.fa.fai"  				  //  Samtools fai Ref  				 
	     	
	aligner		= null  // Default to bwa -> bwamem2 [optional]
	
	generate	= null  // The default parameter generates vcf for all inputs ${onlyVCF} or A cohorte Gvcf ${cohorteGVCF}
	basedon		= null 	// First input csv to prepare CSVs based on it
	region		= null  // To extract specific region from initial mapped .bam
	bedtarget	= null  // Bed file
}

	includeConfig 'conf/igenomes.config' 
 	includeConfig 'conf/ivcf.config'
  
profiles  {
    conda {
        process.conda           = "$projectDir/DelMoro.yml"
        conda.enabled           = true
        channels                = ['conda-forge', 'bioconda', 'defaults']
        docker.enabled          = false
        singularity.enabled     = false
        podman.enabled          = false
        shifter.enabled         = false
        charliecloud.enabled    = false
    }
    mamba {
        conda.enabled           = true
        conda.useMamba          = true
        docker.enabled          = false
        singularity.enabled     = false
        podman.enabled          = false
        shifter.enabled         = false
        charliecloud.enabled    = false
    }
    docker {
        conda.enabled           = false
        docker.enabled          = true
        singularity.enabled     = false
        podman.enabled          = false
        shifter.enabled         = false
        charliecloud.enabled    = false
        docker.runOptions       = '-u $(id -u):$(id -g)'
    }
    singularity {
        conda.enabled           = false
        singularity.enabled     = true
        singularity.autoMounts  = true
        singularity.cacheDir    = "./work/singularity"
        docker.enabled          = false
        podman.enabled          = false
        shifter.enabled         = false
        charliecloud.enabled    = false
    }
    podman {
        conda.enabled           = false
        podman.enabled          = true
        singularity.enabled     = false
        docker.enabled          = false
        shifter.enabled         = false
        charliecloud.enabled    = false
    }
    shifter {
        conda.enabled           = false
        shifter.enabled         = true
        singularity.enabled     = false
        docker.enabled          = false
        podman.enabled          = false
        charliecloud.enabled    = false
    }
    charliecloud {
        conda.enabled           = false
        charliecloud.enabled    = true
        docker.enabled          = false
        singularity.enabled     = false
        podman.enabled          = false
        shifter.enabled         = false
    }
}



def date = new Date().format("HH-mm-ss-dd-MM-yyyy")

report {
    enabled     = true
    overwrite   = true
    file        = "${params.outdir}/RunReports/${date}_my_report.html"
}

trace {
    enabled     = true
    overwrite   = true
    file        = "${params.outdir}/RunReports/${date}_my_trace.txt"
}

timeline {
    enabled     = true
    overwrite   = true
    file        = "${params.outdir}/RunReports/${date}_my_timeline.html"
}

dag {
    enabled     = true
    overwrite   = true
    file        = "${params.outdir}/RunReports/${date}_my_pipeline_dag.dot"
}

